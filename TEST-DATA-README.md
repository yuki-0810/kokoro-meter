# 📊 テストデータ生成ガイド

30日分のテストデータを使ってカレンダー機能とステージ推移を確認できます。

## 🚀 **セットアップ手順**

### **1. ユーザーIDの確認**
1. **Supabase Dashboard** にアクセス
2. **SQL Editor** を開く
3. 以下を実行してユーザーIDを取得：
```sql
SELECT auth.uid();
```
4. 結果をコピー（例：`12345678-1234-1234-1234-123456789abc`）

### **2. テストデータの挿入**
1. `test-data.sql` を開く
2. **すべての** `YOUR_USER_ID_HERE` を実際のユーザーIDに置き換え
3. **Supabase SQL Editor** で修正したSQLを実行

### **3. 動作確認**
1. **ココロメーターアプリ**の「AIジャーナル」タブを開く
2. **「📅 カレンダー表示」**タブをクリック
3. カレンダーにステージレベル別の色分けが表示されることを確認

## 📅 **テストデータの内容**

### **30日分の日記データ**
- **期間**: 30日前〜今日まで
- **総記事数**: 30件
- **AI整理済み**: 全記事にAIメタデータ付き

### **ステージレベル分布**
| Stage | 記事数 | 割合 | 色 |
|-------|--------|------|-----|
| **Stage 0** | 9件 | 30% | 🟢 緑 |
| **Stage 1** | 12件 | 40% | 🔵 青 |
| **Stage 2** | 6件 | 20% | 🟠 オレンジ |
| **Stage 3** | 3件 | 10% | 🔴 赤 |
| **Stage 4** | 0件 | 0% | 🟣 紫 |

### **含まれる体験**
- 🎯 仕事のプロジェクト成功・失敗
- 😰 ストレス・疲労・イライラ
- 🌈 友人・家族との時間
- 🏥 体調不良・回復
- 💪 新しい趣味・習慣の開始
- 🧠 カウンセリング・専門相談

## 🎯 **確認ポイント**

### **カレンダー機能**
- ✅ 月単位の表示・ナビゲーション
- ✅ 日付別ステージレベルの色分け
- ✅ 記録日数・達成率の統計表示
- ✅ クリックで日記詳細表示
- ✅ AI分析結果（感情・出来事・ステージ）

### **週間メンタル分析**
- ✅ 最近7日分の自動分析
- ✅ ステージ判定（0-4）・信頼度表示
- ✅ 分析理由・検出キーワード
- ✅ アクティブレスト提案（3つ）

### **ステージ推移の可視化**
- ✅ 月ごとのトレンド確認
- ✅ 高ストレス期間の特定
- ✅ 回復パターンの把握

## 🔧 **カスタマイズ**

### **ステージレベル調整**
`stage_level` の値を変更して異なるバランスをテスト：
- `0-4` の範囲で設定
- Stage 3-4 の危険域も含めた検証が可能

### **期間の変更**
`INTERVAL` を調整して異なる期間をテスト：
```sql
CURRENT_DATE - INTERVAL '60 days'  -- 60日前
CURRENT_DATE - INTERVAL '7 days'   -- 1週間前
```

### **AI分析データ**
`ai_metadata` のJSONを編集して分析結果をカスタマイズ：
```json
{
  "detected_emotions": ["カスタム感情"],
  "key_events": ["特定の出来事"],
  "stage_level": 2
}
```

## ⚠️ **注意事項**

1. **ユーザーID置換必須**: `YOUR_USER_ID_HERE` をすべて置き換える
2. **重複チェック**: entry_date の重複に注意
3. **バックアップ推奨**: 既存データがある場合は事前バックアップ
4. **テスト環境**: 本番環境での実行前にテスト環境で確認

## 🗑️ **データ削除**

テスト後にデータを削除する場合：
```sql
-- 注意：実際のユーザーIDに置き換えてください
DELETE FROM journals 
WHERE user_id = 'YOUR_USER_ID_HERE' 
AND entry_date >= CURRENT_DATE - INTERVAL '30 days';
```

## 🎉 **期待される結果**

テストデータ挿入後、以下が確認できます：

1. **豊富なカレンダー表示**: 30日分の記録が色分けされて表示
2. **多様なステージ体験**: 正常〜重度疲労まで様々なパターン
3. **リアルな分析結果**: 実際の使用感に近いAI分析・提案
4. **統計機能の動作**: 月間達成率・記録日数の正確な計算

これにより、ココロメーターの全機能を包括的にテストできます！ 